<!DOCTYPE html>
<html>
<head>
	<title>注册</title>
	<meta charset="utf-8">
	<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
	<link rel="stylesheet" type="text/css" href="./css/registe.css">
	<script src="js/jquery.js" type="text/javascript"></script>
</head>
<body>
	<div id="rectangle">
			<img src="./images/logo.png">
	</div>
	<div id="left">
			<img src="./images/pic.png">
	</div>
	<div id="registe">
		<form id="myForm">
			<p>教育信息管理系统</p>
			<label for="idNumber">
			<span>用&nbsp;户&nbsp;ID&nbsp;：</span>
			<input type="text" name="username" id="idNumber">
			<span id="notice1"></span>
			</label>
			<br>
			<label for="username">
			<span>用&nbsp;户&nbsp;名&nbsp;：</span>
			<input type="text" name="username" id="username">
			<span id="notice2"></span>
			</label>
			<br>
			<label for="password">
			<span>用户密码：</span>
			<input type="password" name="password" id="password">
			<span id="notice3"></span>
			</label>
			<br>
			<label for="rating">
			<span>用户身份：</span>
			<select id="rating">
				<option value="1">学校</option>
				<option value="2">公司</option>
				<option value="3">培训机构</option>
				<option value="4">其他</option>
			</select>
			</label>
			<br>
			<button type="button" id="registe_to" onclick="registe()">注册</button>
		</form>
	</div>
</body>

	<script type="text/javascript">
		var idNumber=document.getElementById('idNumber');
		var username=document.getElementById('username');
		var password=document.getElementById('password');
		var notice1=document.getElementById('notice1');
		var notice2=document.getElementById('notice2');
		var notice3=document.getElementById('notice3');
		var a,b,c;
		function registe() {
			if(idNumber.value.length==0){
				notice1.style.display="block";
				notice1.innerHTML="用户ID不能为空";
			}
			else{
				notice1.style.display="none";
				a=1;
			}
			if(username.value.length==0){
				notice2.style.display="block";
				notice2.innerHTML="用户名不能为空";
			}
			else{
				notice2.style.display="none";
				b=1;
			}
			if(password.value.length==0){
				notice3.style.display="block";
				notice3.innerHTML="密码不能为空";
			}
			else{
				notice3.style.display="none";
				c=1;
			}
			if(a==1&&b==1&&c==1){
				$.ajax({
				url:"http://localhost:8031/user/enroll",/*请求的地址*/
	                type:"GET",/*请求的方式*/
	                data:{
	                	//"idNumber":$("#idNumber").val(),
	                	username:$("#username").val(),
	                	password:$("#password").val(),
	                	peerWithOrd:"peerOrg1"
	                	//"rating":$("#rating").val()
	                },
	                dataType:"json",
	                success:function(data){
	                	if (data.success == true) {
	                		// alert("注册成功!");
	                		window.location.href="https://rammsteinlp.cn/educhain/login.html";
	                		// alert("成功");
	                	}else{
	                		alert(data.errMsg);
	                	}
	                	
	                },
	                error:function(){
	                	alert("error!");
	                }
			})
			}						
		}
	</script>
</html>